<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Gerenciar Produtos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <style>
        body {
            background: #121212;
            color: white;
        }

        .produto-linha {
            display: flex;
            align-items: center;
            background: #1e1e1e;
            padding: 10px;
            border-radius: 10px;
            gap: 15px;
        }

        .produto-linha img {
            width: 70px;
            height: 70px;
            object-fit: cover;
            border-radius: 8px;
        }

        .produto-info {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .produto-nome {
            font-size: 1rem;
            font-weight: bold;
        }

        .produto-preco {
            color: #f1c40f;
            font-size: 0.9rem;
        }

        .btn-area {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .produto-container {
            margin-bottom: 12px;
        }
    </style>
</head>

<body class="bg-dark text-light">
    <div class="container py-4">

        <h1 class="mb-4 text-center">ðŸ“¦ Gestor de catalogo</h1>

        <!-- Barra de pesquisa -->
        <form method="GET" class="input-group mb-3">
            <input type="text" name="q" class="form-control" placeholder="Buscar produto..." value="{{ busca }}">
            <button class="btn btn-primary">Buscar</button>
        </form>

        <!-- BotÃ£o novo produto -->
        <div class="mb-3 text-end">
            <a href="{% url 'criar_produto' %}" class="btn btn-success">+ Novo Produto</a>
        </div>

        <!-- Lista -->
        {% for p in produtos %}
        <div class="produto-container">

            <div class="produto-linha">

                <!-- IMAGEM -->
                {% if p.imagem_url %}
                <img src="{{ p.imagem_url|safe }}">
                {% else %}
                <div style="width:70px;height:70px;background:#333;border-radius:8px;display:flex;align-items:center;justify-content:center;">
                    Sem foto
                </div>
                {% endif %}

                <!-- NOME E PREÃ‡O -->
                <div class="produto-info">
                    <span class="produto-nome">{{ p.nome }}</span>
                    <span class="produto-preco">R$ {{ p.preco }}</span>
                </div>

                <!-- BOTÃ•ES -->
                <div class="btn-area">
                    <a href="{% url 'editar_produto' p.id %}" class="btn btn-warning btn-sm">Editar</a>
                    <a href="{% url 'excluir_produto' p.id %}" class="btn btn-danger btn-sm">Excluir</a>
                </div>

            </div>

        </div>
        {% empty %}
        <p class="text-center mt-3">Nenhum produto encontrado ðŸ¥²</p>
        {% endfor %}

    </div>
</body>
</html>
